<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBITS Playground - Resultados NOM 035 Emocional</title>
    
    <!-- Estilos locales -->
    <link rel="stylesheet" href="ubits-colors.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="fontawesome-icons.css">
    <link rel="stylesheet" href="ubits-typography.css">
    <!-- Font Awesome CDN como respaldo -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="components-sidebar.css">
    <link rel="stylesheet" href="components/tab-bar.css">
    <link rel="stylesheet" href="components/floating-menu.css">
    <link rel="stylesheet" href="components/profile-menu.css">
    <link rel="stylesheet" href="components/button.css">
    <link rel="stylesheet" href="components/input.css">
    <link rel="stylesheet" href="profile.css">
    <style>
        /* ===== SISTEMA DE ENMASCARAMIENTO Y FEEDBACK ===== */
        
        /* Overlay de bienvenida que cubre toda la pantalla */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .welcome-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            text-align: center;
            animation: slideInUp 0.6s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .welcome-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--ubits-fg-1-high);
            margin-bottom: 16px;
        }
        
        .welcome-subtitle {
            font-size: 18px;
            color: var(--ubits-fg-1-medium);
            margin-bottom: 32px;
            line-height: 1.6;
        }
        
        .prototype-badge {
            display: inline-block;
            background: #fef3c7;
            color: #92400e;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .features-list {
            text-align: left;
            margin: 24px 0;
            padding: 0 20px;
        }
        
        .features-list li {
            margin: 12px 0;
            color: #374151;
            font-size: 16px;
        }
        
        .features-list i {
            color: #10b981;
            margin-right: 12px;
            width: 20px;
        }
        
        .start-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 24px;
        }
        
        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        
        /* Bot√≥n flotante de feedback */
        .feedback-trigger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            z-index: 9998;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .feedback-trigger:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }
        
        /* Indicador de secci√≥n actual */
        .section-indicator {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(102, 126, 234, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            z-index: 9997;
            backdrop-filter: blur(10px);
        }
        
        /* Estilos espec√≠ficos para la p√°gina de resultados - FIEL AL DISE√ëO */
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
            flex: 1;
            min-width: 0;
            width: 100%;
            overflow: visible;
            max-height: none;
        }

        /* Header de resultados - EXACTO COMO LA IMAGEN */
        .results-header {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 2px;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f3f4f6;
            border: 1px solid var(--ubits-border-1);
            color: #374151;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
            color: var(--ubits-fg-1-high);
        }

        .title-section {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .title-section h1 {
            margin: 0;
            color: var(--ubits-fg-1-high);
            font-size: 24px;
            font-weight: 700;
        }

        .title-section .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid;
            width: 100px;
            text-align: center;
            background: #f0fdf4;
            color: #166534;
            border-color: #22c55e;
        }


        .download-button {
            background: var(--ubits-accent-brand);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
            text-decoration: none;
            outline: none;
            position: relative;
        }

        .download-button:hover {
            background: var(--ubits-accent-brand-hover);
            color: white;
        }

        .download-button:active {
            background: var(--ubits-accent-brand);
            transform: translateY(1px);
        }

        .download-button:focus {
            outline: 2px solid var(--ubits-accent-brand);
            outline-offset: 2px;
        }


        /* Informaci√≥n de la encuesta - EXACTO COMO LA IMAGEN */
        .survey-info {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            margin-bottom: 0px;
        }


        .survey-description {
            color: var(--ubits-fg-1-medium);
            margin-bottom: 0px;
            line-height: 1.5;
            font-size: 14px;
        }

        .survey-details {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            align-items: center;
        }

        .detail-separator {
            width: 1px;
            height: 16px;
            background: #d1d5db;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--ubits-fg-1-medium);
            font-size: 14px;
        }

        .detail-item.bold {
            font-weight: 600;
        }

        .detail-item i {
            color: #9ca3af;
            font-size: 14px;
        }

        .status-badge {
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* M√©tricas - COMPACTAS COMO LA IMAGEN */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 2px;
            margin-bottom: 8px;
        }

        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .metric-title-section {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #f3f4f6;
            color: var(--ubits-fg-1-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .metric-title {
            font-size: 14px;
            color: #374151;
            margin: 0;
            font-weight: 600;
        }


        .metric-value-section {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        .metric-main-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--ubits-fg-1-high);
            line-height: 1;
        }

        .metric-unit-text {
            font-size: 14px;
            color: var(--ubits-fg-1-medium);
            font-weight: 400;
        }



        /* Panel emocional container */
        .panel-emocional-container {
            background: transparent;
            border-radius: 8px;
            padding: 0;
            margin-bottom: 2px;
        }

        .tabs-header {
            display: flex;
            gap: 8px;
        }

        .tab-button {
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: var(--ubits-fg-1-medium);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-direction: row;
        }

        .tab-button:hover {
            color: #374151;
            background: rgba(0, 0, 0, 0.05);
        }

        .tab-button.active {
            color: #1d4ed8;
            background: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tab-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .tab-content {
            padding: 16px 0 0 0;
            min-height: 400px;
            width: 100%;
            box-sizing: border-box;
        }

        .tab-panel {
            display: none;
            width: 100%;
            box-sizing: border-box;
        }

        .tab-panel.active {
            display: block;
        }

        /* Panel Emocional - Nuevos Estilos */
        .panel-container {
            display: flex;
            gap: 16px;
            height: 600px;
            width: 100%;
            box-sizing: border-box;
        }

        .participants-panel {
            flex: 1;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            width: 100%;
            box-sizing: border-box;
        }

        .participant-details-panel {
            flex: 2;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        /* Panel Header - Redise√±ado desde cero */
        .panel-header {
            padding: 12px 24px;
            border-bottom: 1px solid var(--ubits-border-1);
            background: #f9fafb;
            border-radius: 8px 8px 0 0;
        }

        .panel-header h3 {
            margin: 0 0 8px 0;
            color: var(--ubits-fg-1-high);
            font-size: 18px;
            font-weight: 600;
        }

        /* Search and Filters Container - Solo layout b√°sico */
        .search-filters-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Filters Button - Tama√±o fijo y bien alineado */
        .filters-button {
            background: #f3f4f6;
            border: 1px solid var(--ubits-border-1);
            color: var(--ubits-fg-1-medium);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            width: 44px;
            height: 44px;
            flex-shrink: 0;
            position: relative;
        }

        .filters-button:hover {
            background: #e5e7eb;
            color: #374151;
            border-color: #9ca3af;
        }

        .filters-button:active {
            background: #d1d5db;
        }

        .filter-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--ubits-accent-brand);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            min-width: 18px;
        }

        /* Side Panel de Filtros */
        .filters-side-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .filters-side-panel.show {
            right: 0;
        }

        .filters-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .filters-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--ubits-border-1);
            background: #f9fafb;
        }

        .filters-header h3 {
            margin: 0;
            color: var(--ubits-fg-1-high);
            font-size: 18px;
            font-weight: 600;
        }

        .close-filters-btn {
            background: none;
            border: none;
            color: var(--ubits-fg-1-medium);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .close-filters-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .filters-content {
            flex: 1;
            padding: 20px 20px 0 20px;
            overflow-y: auto;
            padding-bottom: 100px; /* Espacio para los botones fijos */
        }

        .filter-group {
            margin-bottom: 24px;
        }

        .filter-label {
            display: block;
            color: #374151;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .custom-select {
            position: relative;
            width: 100%;
        }

        .select-trigger {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--ubits-border-1);
            border-radius: 6px;
            background: #fff;
            color: #374151;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: border-color 0.2s ease;
        }

        .select-trigger:hover {
            border-color: #9ca3af;
        }

        .select-trigger.active {
            border-color: var(--ubits-accent-brand);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .select-trigger .select-text {
            flex: 1;
            text-align: left;
        }

        .select-trigger .select-arrow {
            transition: transform 0.2s ease;
        }

        .select-trigger.active .select-arrow {
            transform: rotate(180deg);
        }

        .select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #fff;
            border: 1px solid var(--ubits-border-1);
            border-radius: 6px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .select-dropdown.show {
            display: block;
        }

        .select-option {
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s ease;
        }

        .select-option:hover {
            background: #f3f4f6;
        }

        .select-option.selected {
            background: #eff6ff;
            color: var(--ubits-accent-brand);
        }

        .select-option input[type="checkbox"] {
            margin: 0;
        }

        .select-option .option-text {
            flex: 1;
        }

        .filter-actions {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            gap: 12px;
            padding: 20px;
            background: #fff;
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
        }

        .apply-filters-btn {
            flex: 1;
            background: var(--ubits-accent-brand);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s ease;
        }

        .apply-filters-btn:hover {
            background: var(--ubits-accent-brand-hover);
        }

        .clear-filters-btn {
            flex: 1;
            background: #f3f4f6;
            color: var(--ubits-fg-1-medium);
            border: 1px solid var(--ubits-border-1);
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s ease;
        }

        .clear-filters-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .participants-list {
            flex: 1;
            overflow-y: auto;
        }

        .participant-item {
            display: flex;
            align-items: center;
            padding: 8px 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 2px;
            border-left: 4px solid transparent;
        }

        .participant-item:hover {
            background: #f3f4f6;
        }

        .participant-item.selected {
            background: #eff6ff;
            border-left-color: var(--ubits-accent-brand);
        }

        .participant-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            margin-right: 12px;
        }

        .participant-info-content {
            flex: 1;
        }

        .participant-name {
            font-weight: 600;
            color: var(--ubits-fg-1-high);
            font-size: 14px;
            margin-bottom: 2px;
        }

        .participant-role {
            color: var(--ubits-fg-1-medium);
            font-size: 12px;
        }

        .risk-level {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .risk-nulo { background: #f3f4f6; color: #6b7280; }
        .risk-bajo { background: #dcfce7; color: #166534; }
        .risk-medio { background: #fef3c7; color: #92400e; }
        .risk-alto { background: #fed7aa; color: #c2410c; }
        .risk-muy-alto { background: #fecaca; color: #dc2626; }

        .no-selection {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            color: #9ca3af;
        }

        .no-selection i {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .no-selection p {
            margin: 0;
            font-size: 14px;
        }

        .participant-info {
            padding: 12px 16px;
            border-bottom: 1px solid var(--ubits-border-1);
        }

        .participant-details {
            display: none;
        }

        .participant-details.show {
            display: block;
        }

        .participant-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .participant-avatar-large {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            margin-right: 12px;
        }

        .participant-info-line {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 4px;
            font-size: 13px;
            line-height: 1.4;
        }

        .participant-name {
            font-weight: 600;
            color: var(--ubits-fg-1-high);
            font-size: 14px;
        }

        .participant-separator {
            color: #9ca3af;
            font-weight: 300;
        }

        .participant-role,
        .participant-department,
        .participant-age,
        .participant-gender,
        .participant-status,
        .participant-country,
        .participant-city,
        .participant-experience {
            color: var(--ubits-fg-1-medium);
            font-size: 13px;
        }

        .survey-results {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }


        .survey-section {
            margin-bottom: 8px;
        }

        .section-header {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: #f9fafb;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 4px solid #e5e7eb;
        }

        .section-header:hover {
            background: #f3f4f6;
        }

        .section-header.open {
            background: #eff6ff;
            border-left-color: var(--ubits-accent-brand);
        }

        .section-risk-info {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: auto;
            margin-right: 12px;
        }

        .section-risk-level {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .section-risk-level.nulo {
            background: #f3f4f6;
            color: var(--ubits-fg-1-medium);
        }

        .section-risk-level.bajo {
            background: #dcfce7;
            color: #166534;
        }

        .section-risk-level.medio {
            background: #fef3c7;
            color: #92400e;
        }

        .section-risk-level.alto {
            background: #fed7aa;
            color: #c2410c;
        }

        .section-risk-level.muy-alto {
            background: #fecaca;
            color: #dc2626;
        }

        .section-percentage {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            min-width: 35px;
            text-align: right;
        }

        .section-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: transparent;
            color: #374151;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }

        /* Buscador simple */
        .simple-search-container {
            position: relative;
            width: 100%;
        }

        .simple-search-input {
            width: 100%;
            height: 40px;
            padding: 8px 12px 8px 40px;
            border: 1px solid var(--ubits-border-1);
            border-radius: 6px;
            font-size: 14px;
            background: white;
            color: #374151;
            outline: none;
            box-sizing: border-box;
            transition: border-color 0.2s ease;
        }

        .simple-search-input:focus {
            border-color: var(--ubits-accent-brand);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .simple-search-input::placeholder {
            color: #9ca3af;
        }

        .simple-search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: var(--ubits-fg-1-medium);
            pointer-events: none;
            z-index: 1;
        }

        .section-title {
            flex: 1;
            font-weight: 600;
            color: var(--ubits-fg-1-high);
            font-size: 14px;
        }

        .section-chevron {
            color: #9ca3af;
            font-size: 12px;
            transition: transform 0.2s ease;
        }

        .section-header.open .section-chevron {
            transform: rotate(180deg);
        }

        .section-content {
            display: none;
            padding: 16px;
            background: white;
            border: 1px solid #e5e7eb;
            border-top: none;
            border-radius: 0 0 6px 6px;
        }

        .section-content.open {
            display: block;
        }

        .question-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .question-item:last-child {
            border-bottom: none;
        }

        .question-text {
            flex: 1;
            color: #374151;
            font-size: 14px;
            line-height: 1.4;
        }

        .question-answer {
            margin-left: 16px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .answer-yes {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 500;
        }

        .answer-yes::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ef4444;
            flex-shrink: 0;
        }

        .answer-no {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 500;
        }

        .answer-no::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #22c55e;
            flex-shrink: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .survey-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs-header {
                flex-direction: column;
            }

            .panel-container {
                flex-direction: column;
                height: auto;
            }

            .participants-panel,
            .participant-details-panel {
                flex: none;
            }
        }
    </style>
</head>
<body data-theme="light">


    <!-- ===== BOT√ìN DE FEEDBACK FLOTANTE ===== -->
    <div class="feedback-trigger" id="feedbackTrigger" onclick="openFeedbackModal()">
        üí¨
    </div>

    <!-- ===== INDICADOR DE SECCI√ìN ===== -->
    <div class="section-indicator" id="sectionIndicator">
        üìä Vista General
    </div>

    <div class="dashboard-container">
        <div class="tooltip" id="tooltip"></div>
        
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Content Area -->
            <div class="content-area">
                <div class="results-container">
                    <!-- Header de resultados - EXACTO COMO LA IMAGEN -->
                    <div class="results-header">
                        <button class="back-button" onclick="window.history.back()">
                            <i class="far fa-arrow-left"></i>
                            <span>Regresar</span>
                        </button>
                        <div class="title-section">
                            <h1>NOM 035 Emocional</h1>
                            <span class="status-badge">Completado</span>
                        </div>
                        <div style="margin-left: auto;">
                            <button class="ubits-button ubits-button--primary ubits-button--md" type="button" id="download-csv-btn" onclick="downloadEmotionalResponses()">
                                <i class="far fa-download"></i>
                                <span>Descargar respuestas</span>
                            </button>
                        </div>
                    </div>

                    <!-- Informaci√≥n de la encuesta - EXACTO COMO LA IMAGEN -->
                    <div class="survey-info">
                        <div class="survey-details">
                            <div class="detail-item">
                                <i class="far fa-users"></i>
                                <span>Enviado a <strong>150 colaboradores</strong></span>
                            </div>
                            <div class="detail-separator"></div>
                            <div class="detail-item">
                                <i class="far fa-calendar"></i>
                                <span>Inicio <strong>15 octubre 2024</strong></span>
                            </div>
                            <div class="detail-item">
                                <span>Hasta <strong>15 noviembre 2024</strong></span>
                            </div>
                            <div class="detail-separator"></div>
                            <div class="detail-item">
                                <i class="far fa-globe"></i>
                                <span>Respuestas: <strong>P√∫blica</strong></span>
                            </div>
                        </div>

                    </div>

                    <!-- M√©tricas clave - FUERA DEL CONTENEDOR SUPERIOR -->
                    <div class="metrics-grid">
                        <!-- M√©trica 1: Total canalizados -->
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-title-section">
                                    <div class="metric-icon">
                                        <i class="far fa-users"></i>
                                    </div>
                                    <h3 class="metric-title">Total de casos canalizados</h3>
                                </div>
                            </div>
                            <div class="metric-value-section">
                                <div class="metric-main-number">3</div>
                                <div class="metric-unit-text">Casos</div>
                            </div>
                        </div>

                        <!-- M√©trica 2: Total de casos de riesgo -->
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-title-section">
                                    <div class="metric-icon">
                                        <i class="far fa-chart-bar"></i>
                                    </div>
                                    <h3 class="metric-title">Total de casos en riesgo alto</h3>
                                </div>
                            </div>
                            <div class="metric-value-section">
                                <div class="metric-main-number">5</div>
                                <div class="metric-unit-text">Casos</div>
                            </div>
                        </div>

                        <!-- M√©trica 3: % de participaci√≥n -->
                        <div class="metric-card">
                            <div class="metric-header">
                                <div class="metric-title-section">
                                    <div class="metric-icon">
                                        <i class="far fa-check-circle"></i>
                                    </div>
                                    <h3 class="metric-title">90% de participaci√≥n</h3>
                                </div>
                            </div>
                            <div class="metric-value-section">
                                <div class="metric-main-number">140 / 150</div>
                                <div class="metric-unit-text">Colaboradores</div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel emocional ATS -->
                    <div class="panel-emocional-container">
                                <div class="panel-container">
                                    <!-- Panel Izquierdo - Lista de Participantes -->
                                    <div class="participants-panel">
                                        <div class="panel-header">
                                            <h3>Participantes</h3>
                                            <div class="search-filters-container">
                                            <div class="simple-search-container" style="flex: 1;">
                                                <i class="far fa-search simple-search-icon"></i>
                                                <input type="text" id="participant-search" placeholder="Buscar participante..." class="simple-search-input">
                                            </div>
                                                <button class="filters-button" id="filters-btn" title="Filtros">
                                                    <i class="far fa-filter"></i>
                                                    <span class="filter-badge" id="filter-badge" style="display: none;">0</span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="participants-list" id="participants-list">
                                            <!-- Lista de participantes se generar√° din√°micamente -->
                                        </div>
                                    </div>

                                    <!-- Side Panel de Filtros -->
                                    <div class="filters-side-panel" id="filters-side-panel">
                                        <div class="filters-header">
                                            <h3>Filtros</h3>
                                            <button class="close-filters-btn" id="close-filters-btn">
                                                <i class="far fa-times"></i>
                                            </button>
                                        </div>
                                        <div class="filters-content">
                                            <div class="filter-group">
                                                <label class="filter-label">Nivel de Riesgo</label>
                                                <div class="custom-select" id="risk-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar niveles</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="risk-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="nulo">
                                                            <input type="checkbox" id="risk-nulo">
                                                            <span class="option-text">Nulo</span>
                                                        </div>
                                                        <div class="select-option" data-value="bajo">
                                                            <input type="checkbox" id="risk-bajo">
                                                            <span class="option-text">Bajo</span>
                                                        </div>
                                                        <div class="select-option" data-value="medio">
                                                            <input type="checkbox" id="risk-medio">
                                                            <span class="option-text">Medio</span>
                                                        </div>
                                                        <div class="select-option" data-value="alto">
                                                            <input type="checkbox" id="risk-alto">
                                                            <span class="option-text">Alto</span>
                                                        </div>
                                                        <div class="select-option" data-value="muy-alto">
                                                            <input type="checkbox" id="risk-muy-alto">
                                                            <span class="option-text">Muy Alto</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="filter-group">
                                                <label class="filter-label">√Årea</label>
                                                <div class="custom-select" id="department-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar √°reas</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="dept-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Ventas">
                                                            <input type="checkbox" id="dept-ventas">
                                                            <span class="option-text">Ventas</span>
                                                        </div>
                                                        <div class="select-option" data-value="Tecnolog√≠a">
                                                            <input type="checkbox" id="dept-tecnologia">
                                                            <span class="option-text">Tecnolog√≠a</span>
                                                        </div>
                                                        <div class="select-option" data-value="Recursos Humanos">
                                                            <input type="checkbox" id="dept-rrhh">
                                                            <span class="option-text">Recursos Humanos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Finanzas">
                                                            <input type="checkbox" id="dept-finanzas">
                                                            <span class="option-text">Finanzas</span>
                                                        </div>
                                                        <div class="select-option" data-value="Administraci√≥n">
                                                            <input type="checkbox" id="dept-administracion">
                                                            <span class="option-text">Administraci√≥n</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="filter-group">
                                                <label class="filter-label">Cargo</label>
                                                <div class="custom-select" id="position-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar cargos</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="pos-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Gerente">
                                                            <input type="checkbox" id="pos-gerente">
                                                            <span class="option-text">Gerente</span>
                                                        </div>
                                                        <div class="select-option" data-value="Desarrollador">
                                                            <input type="checkbox" id="pos-desarrollador">
                                                            <span class="option-text">Desarrollador</span>
                                                        </div>
                                                        <div class="select-option" data-value="Analista">
                                                            <input type="checkbox" id="pos-analista">
                                                            <span class="option-text">Analista</span>
                                                        </div>
                                                        <div class="select-option" data-value="Contador">
                                                            <input type="checkbox" id="pos-contador">
                                                            <span class="option-text">Contador</span>
                                                        </div>
                                                        <div class="select-option" data-value="Asistente">
                                                            <input type="checkbox" id="pos-asistente">
                                                            <span class="option-text">Asistente</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="filter-group">
                                                <label class="filter-label">Sexo</label>
                                                <div class="custom-select" id="gender-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar sexo</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="gen-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Femenino">
                                                            <input type="checkbox" id="gen-femenino">
                                                            <span class="option-text">Femenino</span>
                                                        </div>
                                                        <div class="select-option" data-value="Masculino">
                                                            <input type="checkbox" id="gen-masculino">
                                                            <span class="option-text">Masculino</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="filter-group">
                                                <label class="filter-label">Estado Civil</label>
                                                <div class="custom-select" id="marital-status-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar estado civil</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="est-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Soltero">
                                                            <input type="checkbox" id="est-soltero">
                                                            <span class="option-text">Soltero</span>
                                                        </div>
                                                        <div class="select-option" data-value="Casado">
                                                            <input type="checkbox" id="est-casado">
                                                            <span class="option-text">Casado</span>
                                                        </div>
                                                        <div class="select-option" data-value="Divorciada">
                                                            <input type="checkbox" id="est-divorciada">
                                                            <span class="option-text">Divorciada</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="filter-group">
                                                <label class="filter-label">Edad</label>
                                                <div class="custom-select" id="age-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar rango de edad</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="age-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="20-30">
                                                            <input type="checkbox" id="age-20-30">
                                                            <span class="option-text">20-30 a√±os</span>
                                                        </div>
                                                        <div class="select-option" data-value="31-40">
                                                            <input type="checkbox" id="age-31-40">
                                                            <span class="option-text">31-40 a√±os</span>
                                                        </div>
                                                        <div class="select-option" data-value="41-50">
                                                            <input type="checkbox" id="age-41-50">
                                                            <span class="option-text">41-50 a√±os</span>
                                                        </div>
                                                        <div class="select-option" data-value="51+">
                                                            <input type="checkbox" id="age-51+">
                                                            <span class="option-text">51+ a√±os</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="filter-group">
                                                <label class="filter-label">Pa√≠s</label>
                                                <div class="custom-select" id="country-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar pa√≠ses</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="country-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Colombia">
                                                            <input type="checkbox" id="country-colombia">
                                                            <span class="option-text">Colombia</span>
                                                        </div>
                                                        <div class="select-option" data-value="M√©xico">
                                                            <input type="checkbox" id="country-mexico">
                                                            <span class="option-text">M√©xico</span>
                                                        </div>
                                                        <div class="select-option" data-value="Argentina">
                                                            <input type="checkbox" id="country-argentina">
                                                            <span class="option-text">Argentina</span>
                                                        </div>
                                                        <div class="select-option" data-value="Chile">
                                                            <input type="checkbox" id="country-chile">
                                                            <span class="option-text">Chile</span>
                                                        </div>
                                                        <div class="select-option" data-value="Per√∫">
                                                            <input type="checkbox" id="country-peru">
                                                            <span class="option-text">Per√∫</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="filter-group">
                                                <label class="filter-label">Ciudad</label>
                                                <div class="custom-select" id="city-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar ciudades</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="city-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Bogot√°">
                                                            <input type="checkbox" id="city-bogota">
                                                            <span class="option-text">Bogot√°</span>
                                                        </div>
                                                        <div class="select-option" data-value="Medell√≠n">
                                                            <input type="checkbox" id="city-medellin">
                                                            <span class="option-text">Medell√≠n</span>
                                                        </div>
                                                        <div class="select-option" data-value="Cali">
                                                            <input type="checkbox" id="city-cali">
                                                            <span class="option-text">Cali</span>
                                                        </div>
                                                        <div class="select-option" data-value="Ciudad de M√©xico">
                                                            <input type="checkbox" id="city-mexico">
                                                            <span class="option-text">Ciudad de M√©xico</span>
                                                        </div>
                                                        <div class="select-option" data-value="Buenos Aires">
                                                            <input type="checkbox" id="city-buenos-aires">
                                                            <span class="option-text">Buenos Aires</span>
                                                        </div>
                                                        <div class="select-option" data-value="Santiago">
                                                            <input type="checkbox" id="city-santiago">
                                                            <span class="option-text">Santiago</span>
                                                        </div>
                                                        <div class="select-option" data-value="Lima">
                                                            <input type="checkbox" id="city-lima">
                                                            <span class="option-text">Lima</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="filter-group">
                                                <label class="filter-label">L√≠der</label>
                                                <div class="custom-select" id="leader-select">
                                                    <div class="select-trigger">
                                                        <span class="select-text">Seleccionar l√≠deres</span>
                                                        <i class="fas fa-chevron-down select-arrow"></i>
                                                    </div>
                                                    <div class="select-dropdown">
                                                        <div class="select-option" data-value="todos">
                                                            <input type="checkbox" id="leader-todos">
                                                            <span class="option-text">Todos</span>
                                                        </div>
                                                        <div class="select-option" data-value="Ana Mart√≠nez">
                                                            <input type="checkbox" id="leader-ana-martinez">
                                                            <span class="option-text">Ana Mart√≠nez</span>
                                                        </div>
                                                        <div class="select-option" data-value="Luis Fern√°ndez">
                                                            <input type="checkbox" id="leader-luis-fernandez">
                                                            <span class="option-text">Luis Fern√°ndez</span>
                                                        </div>
                                                        <div class="select-option" data-value="Mar√≠a Gonz√°lez">
                                                            <input type="checkbox" id="leader-maria-gonzalez">
                                                            <span class="option-text">Mar√≠a Gonz√°lez</span>
                                                        </div>
                                                        <div class="select-option" data-value="Carlos Rodr√≠guez">
                                                            <input type="checkbox" id="leader-carlos-rodriguez">
                                                            <span class="option-text">Carlos Rodr√≠guez</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="filter-actions">
                                                <button class="apply-filters-btn" id="apply-filters-btn">
                                                    <i class="far fa-check"></i>
                                                    Aplicar Filtros
                                                </button>
                                                <button class="clear-filters-btn" id="clear-filters-btn">
                                                    <i class="far fa-times"></i>
                                                    Limpiar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="filters-overlay" id="filters-overlay"></div>

                                    <!-- Panel Derecho - Detalles del Participante -->
                                    <div class="participant-details-panel">
                                        <div class="panel-header">
                                            <h3>Detalles del Participante</h3>
                                        </div>
                                        <div class="participant-info" id="participant-info">
                                            <div class="no-selection">
                                                <i class="far fa-user"></i>
                                                <p>Selecciona un participante para ver sus detalles</p>
                                            </div>
                                        </div>
                                        <div class="survey-results" id="survey-results">
                                            <!-- Resultados de la encuesta se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Tab Bar Container -->
    <div id="tab-bar-container"></div>

    <!-- Floating Menu Container -->
    <div id="floating-menu-container"></div>
    
    <!-- Profile Menu Container -->
    <div id="profile-menu-container"></div>

    <script src="components/sidebar.js"></script>
    <script src="components/tab-bar.js"></script>
    <script src="components/floating-menu.js"></script>
    <script src="components/profile-menu.js"></script>
    <script src="components/input.js"></script>
    <script src="script.js"></script>
    <script>
        // Cargar componentes din√°micamente
        document.addEventListener('DOMContentLoaded', function() {
            loadSidebar('sidebar-container', 'encuestas');
            loadTabBar('tab-bar-container');
            loadFloatingMenu('floating-menu-container');
            loadProfileMenu('profile-menu-container');
            
            // Activar el tab "Encuestas" espec√≠ficamente despu√©s de cargar el SubNav
            setTimeout(() => {
                // Remover active de todos los tabs (desktop y m√≥vil)
                document.querySelectorAll('.nav-tab, .hamburger-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Activar el tab Encuestas en desktop
                const encuestasTab = document.querySelector('.nav-tab[data-tab="encuestas"]');
                if (encuestasTab) {
                    encuestasTab.classList.add('active');
                }
                
                // Activar el tab Encuestas en m√≥vil (hamburger menu)
                const encuestasHamburger = document.querySelector('.hamburger-item[data-tab="encuestas"]');
                if (encuestasHamburger) {
                    encuestasHamburger.classList.add('active');
                }
                
                // Activar el bot√≥n de encuestas en el sidebar
                const encuestasButton = document.querySelector('.nav-button[data-section="encuestas"]');
                if (encuestasButton) {
                    // Remover active de todos los botones del sidebar
                    document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
                    // Activar el bot√≥n de encuestas
                    encuestasButton.classList.add('active');
                }
                
                // Activar el bot√≥n "M√≥dulos" del Tab-bar m√≥vil
                const modulosTabBarItem = document.querySelector('.tab-bar-item[data-tab="modulos"]');
                if (modulosTabBarItem) {
                    // Remover active de todos los items del tab-bar
                    document.querySelectorAll('.tab-bar-item').forEach(item => item.classList.remove('active'));
                    // Activar el item m√≥dulos
                    modulosTabBarItem.classList.add('active');
                }
                
                // Activar la opci√≥n "Encuestas" como direct link del floating menu
                if (typeof setActiveDirectLink === 'function') {
                    setActiveDirectLink('encuestas');
                }
            }, 200);
        });

        // Funcionalidad de tabs
        document.addEventListener('DOMContentLoaded', function() {

            // Funcionalidad del desplegable de descarga
            const downloadBtn = document.getElementById('download-btn');
            const downloadDropdown = document.getElementById('download-dropdown');
            
            if (downloadBtn && downloadDropdown) {
                downloadBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    downloadDropdown.classList.toggle('show');
                });
                
                // Cerrar desplegable al hacer clic fuera
                document.addEventListener('click', function(e) {
                    if (!downloadBtn.contains(e.target) && !downloadDropdown.contains(e.target)) {
                        downloadDropdown.classList.remove('show');
                    }
                });
            }

        });

        // Datos de participantes de ejemplo
        const participantsData = [
            {
                id: 1,
                name: "Mar√≠a Gonz√°lez",
                role: "Gerente de Ventas",
                riskLevel: "muy-alto",
                avatar: "MG",
                avatarColor: "#dc2626",
                details: {
                    age: 35,
                    department: "Ventas",
                    position: "Gerente",
                    gender: "Femenino",
                    maritalStatus: "Casada",
                    country: "Colombia",
                    city: "Bogot√°",
                    experience: "8 a√±os",
                    email: "maria.gonzalez@empresa.com",
                    leader: "Ana Mart√≠nez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "S√≠" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "S√≠" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "S√≠" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "S√≠" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "S√≠" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "S√≠" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "S√≠" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "S√≠" }
                    ]
                }
            },
            {
                id: 2,
                name: "Carlos Rodr√≠guez",
                role: "Desarrollador Senior",
                riskLevel: "alto",
                avatar: "CR",
                avatarColor: "#c2410c",
                details: {
                    age: 28,
                    department: "Tecnolog√≠a",
                    position: "Desarrollador",
                    gender: "Masculino",
                    maritalStatus: "Soltero",
                    country: "M√©xico",
                    city: "Ciudad de M√©xico",
                    experience: "5 a√±os",
                    email: "carlos.rodriguez@empresa.com",
                    leader: "Luis Fern√°ndez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "S√≠" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 3,
                name: "Ana Mart√≠nez",
                role: "Analista de Recursos Humanos",
                riskLevel: "medio",
                avatar: "AM",
                avatarColor: "#92400e",
                details: {
                    age: 32,
                    department: "Recursos Humanos",
                    position: "Analista",
                    gender: "Femenino",
                    maritalStatus: "Divorciada",
                    country: "Argentina",
                    city: "Buenos Aires",
                    experience: "6 a√±os",
                    email: "ana.martinez@empresa.com",
                    leader: "Mar√≠a Gonz√°lez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "S√≠" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 4,
                name: "Luis Fern√°ndez",
                role: "Contador",
                riskLevel: "bajo",
                avatar: "LF",
                avatarColor: "#166534",
                details: {
                    age: 45,
                    department: "Finanzas",
                    position: "Contador",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    country: "Chile",
                    city: "Santiago",
                    experience: "12 a√±os",
                    email: "luis.fernandez@empresa.com",
                    leader: "Carlos Rodr√≠guez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 5,
                name: "Sofia Herrera",
                role: "Asistente Administrativa",
                riskLevel: "nulo",
                avatar: "SH",
                avatarColor: "#6b7280",
                details: {
                    age: 26,
                    department: "Administraci√≥n",
                    position: "Asistente",
                    gender: "Femenino",
                    maritalStatus: "Soltera",
                    country: "Per√∫",
                    city: "Lima",
                    experience: "3 a√±os",
                    email: "sofia.herrera@empresa.com",
                    leader: "Ana Mart√≠nez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 6,
                name: "Roberto Silva",
                role: "Director de Marketing",
                riskLevel: "bajo",
                avatar: "RS",
                avatarColor: "#166534",
                details: {
                    age: 42,
                    department: "Marketing",
                    position: "Director",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    country: "Espa√±a",
                    city: "Madrid",
                    experience: "12 a√±os",
                    email: "roberto.silva@empresa.com",
                    leader: "Luis Fern√°ndez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 7,
                name: "Carmen L√≥pez",
                role: "Dise√±adora UX",
                riskLevel: "medio",
                avatar: "CL",
                avatarColor: "#92400e",
                details: {
                    age: 29,
                    department: "Tecnolog√≠a",
                    position: "Dise√±adora",
                    gender: "Femenino",
                    maritalStatus: "Soltera",
                    country: "Uruguay",
                    city: "Montevideo",
                    experience: "4 a√±os",
                    email: "carmen.lopez@empresa.com",
                    leader: "Mar√≠a Gonz√°lez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 8,
                name: "Diego Morales",
                role: "Analista Financiero",
                riskLevel: "nulo",
                avatar: "DM",
                avatarColor: "#6b7280",
                details: {
                    age: 31,
                    department: "Finanzas",
                    position: "Analista",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    country: "Ecuador",
                    city: "Quito",
                    experience: "7 a√±os",
                    email: "diego.morales@empresa.com",
                    leader: "Ana Mart√≠nez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 9,
                name: "Patricia Vega",
                role: "Coordinadora de Proyectos",
                riskLevel: "alto",
                avatar: "PV",
                avatarColor: "#c2410c",
                details: {
                    age: 38,
                    department: "Administraci√≥n",
                    position: "Coordinadora",
                    gender: "Femenino",
                    maritalStatus: "Divorciada",
                    country: "Venezuela",
                    city: "Caracas",
                    experience: "10 a√±os",
                    email: "patricia.vega@empresa.com",
                    leader: "Luis Fern√°ndez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "S√≠" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "S√≠" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "S√≠" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "S√≠" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "S√≠" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "S√≠" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "S√≠" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "S√≠" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "S√≠" }
                    ]
                }
            },
            {
                id: 10,
                name: "Fernando Ruiz",
                role: "Especialista en Seguridad",
                riskLevel: "muy-alto",
                avatar: "FR",
                avatarColor: "#dc2626",
                details: {
                    age: 45,
                    department: "Seguridad",
                    position: "Especialista",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    experience: "15 a√±os",
                    email: "fernando.ruiz@empresa.com",
                    leader: "Mar√≠a Gonz√°lez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "S√≠" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "S√≠" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "S√≠" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "S√≠" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "S√≠" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "S√≠" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "S√≠" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "S√≠" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "S√≠" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "S√≠" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "S√≠" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "S√≠" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "S√≠" }
                    ]
                }
            },
            {
                id: 11,
                name: "Isabel Torres",
                role: "Supervisora de Producci√≥n",
                riskLevel: "medio",
                avatar: "IT",
                avatarColor: "#92400e",
                details: {
                    age: 33,
                    department: "Producci√≥n",
                    position: "Supervisora",
                    gender: "Femenino",
                    maritalStatus: "Casada",
                    experience: "9 a√±os",
                    email: "isabel.torres@empresa.com",
                    leader: "Ana Mart√≠nez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 12,
                name: "Miguel Castro",
                role: "T√©cnico de Mantenimiento",
                riskLevel: "bajo",
                avatar: "MC",
                avatarColor: "#166534",
                details: {
                    age: 41,
                    department: "Mantenimiento",
                    position: "T√©cnico",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    experience: "11 a√±os",
                    email: "miguel.castro@empresa.com",
                    leader: "Luis Fern√°ndez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 13,
                name: "Laura Jim√©nez",
                role: "Psic√≥loga Organizacional",
                riskLevel: "nulo",
                avatar: "LJ",
                avatarColor: "#6b7280",
                details: {
                    age: 36,
                    department: "Recursos Humanos",
                    position: "Psic√≥loga",
                    gender: "Femenino",
                    maritalStatus: "Soltera",
                    experience: "8 a√±os",
                    email: "laura.jimenez@empresa.com",
                    leader: "Mar√≠a Gonz√°lez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            },
            {
                id: 14,
                name: "Andr√©s Mendoza",
                role: "Gerente de Ventas",
                riskLevel: "alto",
                avatar: "AM",
                avatarColor: "#c2410c",
                details: {
                    age: 44,
                    department: "Ventas",
                    position: "Gerente",
                    gender: "Masculino",
                    maritalStatus: "Casado",
                    experience: "13 a√±os",
                    email: "andres.mendoza@empresa.com",
                    leader: "Ana Mart√≠nez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "S√≠" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "S√≠" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "S√≠" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "S√≠" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "S√≠" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "S√≠" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "S√≠" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "S√≠" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "S√≠" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "S√≠" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "S√≠" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "S√≠" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "S√≠" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "S√≠" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "S√≠" }
                    ]
                }
            },
            {
                id: 15,
                name: "Valentina Herrera",
                role: "Desarrolladora Frontend",
                riskLevel: "bajo",
                avatar: "VH",
                avatarColor: "#166534",
                details: {
                    age: 27,
                    department: "Tecnolog√≠a",
                    position: "Desarrolladora",
                    gender: "Femenino",
                    maritalStatus: "Soltera",
                    experience: "3 a√±os",
                    email: "valentina.herrera@empresa.com",
                    leader: "Luis Fern√°ndez"
                },
                surveyResults: {
                    "Secci√≥n I. Acontecimiento traum√°tico severo": [
                        { question: "¬øHas presenciado o vivido alg√∫n accidente grave en tu trabajo?", answer: "No" },
                        { question: "¬øHas sufrido lesiones que pusieron en riesgo tu vida en el trabajo?", answer: "No" },
                        { question: "¬øHas sido testigo de la muerte o lesiones graves de alg√∫n compa√±ero?", answer: "No" },
                        { question: "¬øHas sido amenazado de muerte o sufrido alg√∫n tipo de agresi√≥n en tu trabajo?", answer: "No" },
                        { question: "¬øHas vivido alg√∫n asalto, secuestro o intento de agresi√≥n en tu entorno laboral?", answer: "No" },
                        { question: "¬øHas estado en situaciones de incendio, explosi√≥n o desastre natural en el trabajo?", answer: "No" }
                    ],
                    "Secci√≥n II. Recuerdos persistentes sobre el acontecimiento": [
                        { question: "¬øVuelves a pensar constantemente en lo que ocurri√≥ o en las im√°genes del suceso?", answer: "No" },
                        { question: "¬øTienes pesadillas o sue√±os repetitivos sobre lo que pas√≥?", answer: "No" }
                    ],
                    "Secci√≥n III. Esfuerzo por evitar circunstancias parecidas o asociadas al acontecimiento": [
                        { question: "¬øEvitas hablar o pensar en lo que ocurri√≥ porque te hace sentir mal?", answer: "No" },
                        { question: "¬øEvitas lugares o personas que te recuerdan lo sucedido?", answer: "No" },
                        { question: "¬øSientes que lo ocurrido sigue afectando tu vida diaria?", answer: "No" },
                        { question: "¬øHas notado que te cuesta disfrutar de cosas que antes te gustaban?", answer: "No" },
                        { question: "¬øSientes que te has alejado emocionalmente de otras personas?", answer: "No" },
                        { question: "¬øTienes dificultad para sentir cari√±o o cercan√≠a con los dem√°s?", answer: "No" },
                        { question: "¬øTe cuesta mantener el inter√©s por tu trabajo o por las actividades cotidianas?", answer: "No" }
                    ],
                    "Secci√≥n IV. Afectaci√≥n": [
                        { question: "¬øHas notado dificultad para dormir despu√©s de lo ocurrido?", answer: "No" },
                        { question: "¬øTe irritas con facilidad o te cuesta controlar tu enojo?", answer: "No" },
                        { question: "¬øTe cuesta concentrarte en tus tareas diarias?", answer: "No" },
                        { question: "¬øSientes que est√°s siempre en alerta o en tensi√≥n?", answer: "No" },
                        { question: "¬øTe sobresaltas f√°cilmente ante ruidos o movimientos repentinos?", answer: "No" }
                    ]
                }
            }
        ];

        // Inicializar panel emocional
        function initializeEmotionalPanel() {
            renderParticipantsList();
            setupSearch();
            
            // Seleccionar autom√°ticamente el primer participante
            if (participantsData.length > 0) {
                selectParticipant(participantsData[0].id);
            }
        }

        // Renderizar lista de participantes
        function renderParticipantsList(participants = participantsData) {
            console.log('üîç ===== INICIANDO RENDERIZADO =====');
            console.log('üîç Participantes recibidos:', participants.length);
            console.log('üîç Nombres de participantes:', participants.map(p => p.name));
            
            const participantsList = document.getElementById('participants-list');
            console.log('üîç Elemento participants-list encontrado:', !!participantsList);
            console.log('üîç Elemento participants-list:', participantsList);
            
            if (!participantsList) {
                console.error('üîç ERROR: No se encontr√≥ el elemento participants-list');
                return;
            }
            
            console.log('üîç Limpiando contenido anterior...');
            participantsList.innerHTML = '';
            console.log('üîç Contenido limpiado, iniciando renderizado...');

            participants.forEach((participant, index) => {
                console.log(`üîç Renderizando participante ${index + 1}: ${participant.name}`);
                
                const participantItem = document.createElement('div');
                participantItem.className = 'participant-item';
                participantItem.dataset.participantId = participant.id;
                
                participantItem.innerHTML = `
                    <div class="participant-avatar" style="background-color: ${participant.avatarColor}">
                        ${participant.avatar}
                    </div>
                    <div class="participant-info-content">
                        <div class="participant-name">${participant.name}</div>
                        <div class="participant-role">${participant.role}</div>
                    </div>
                    <div class="risk-level risk-${participant.riskLevel}">
                        ${participant.riskLevel.replace('-', ' ')}
                    </div>
                `;

                participantItem.addEventListener('click', () => {
                    selectParticipant(participant.id);
                });

                participantsList.appendChild(participantItem);
                console.log(`üîç Participante ${participant.name} agregado al DOM`);
            });
            
            console.log('üîç ===== RENDERIZADO COMPLETADO =====');
            console.log('üîç Total de elementos en participantsList:', participantsList.children.length);
        }

        // Seleccionar participante
        function selectParticipant(participantId) {
            // Remover selecci√≥n anterior
            document.querySelectorAll('.participant-item').forEach(item => {
                item.classList.remove('selected');
            });

            // Agregar selecci√≥n al item actual
            document.querySelector(`[data-participant-id="${participantId}"]`).classList.add('selected');

            // Mostrar detalles del participante
            showParticipantDetails(participantId);
        }

        // Mostrar detalles del participante
        function showParticipantDetails(participantId) {
            const participant = participantsData.find(p => p.id === participantId);
            if (!participant) return;

            const participantInfo = document.getElementById('participant-info');
            const surveyResults = document.getElementById('survey-results');

            // Mostrar informaci√≥n del participante
            participantInfo.innerHTML = `
                <div class="participant-details show">
                    <div class="participant-header">
                        <div class="participant-avatar-large" style="background-color: ${participant.avatarColor}">
                            ${participant.avatar}
                        </div>
                        <div class="participant-details-content">
                            <div class="participant-info-line">
                                <span class="participant-name">${participant.name}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-role">${participant.role}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-department">${participant.details.department}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-age">${participant.details.age} a√±os</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-gender">${participant.details.gender}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-status">${participant.details.maritalStatus}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-country">${participant.details.country}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-city">${participant.details.city}</span>
                                <span class="participant-separator">‚Ä¢</span>
                                <span class="participant-experience">${participant.details.experience} de experiencia</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Mostrar resultados de la encuesta
            surveyResults.innerHTML = `
                ${Object.entries(participant.surveyResults).map(([sectionName, questions], index) => `
                    <div class="survey-section">
                        <div class="section-header" onclick="toggleSection(this)">
                            <div class="section-number">${index + 1}</div>
                            <div class="section-title">${sectionName}</div>
                            <div class="section-risk-info">
                                <span class="section-risk-level ${getSectionRiskLevel(questions)}">${getSectionRiskLevel(questions)}</span>
                                <span class="section-percentage">${getSectionPercentage(questions)}%</span>
                            </div>
                            <i class="far fa-chevron-down section-chevron"></i>
                        </div>
                        <div class="section-content ${index === 0 ? 'open' : ''}">
                            ${questions.map(q => `
                                <div class="question-item">
                                    <div class="question-text">${q.question}</div>
                                    <div class="question-answer ${q.answer === 'S√≠' ? 'answer-yes' : 'answer-no'}">
                                        ${q.answer}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Calcular nivel de riesgo de una secci√≥n
        function getSectionRiskLevel(questions) {
            const yesCount = questions.filter(q => q.answer === 'S√≠').length;
            const totalQuestions = questions.length;
            const percentage = (yesCount / totalQuestions) * 100;
            
            if (percentage >= 80) return 'muy-alto';
            if (percentage >= 60) return 'alto';
            if (percentage >= 40) return 'medio';
            if (percentage >= 20) return 'bajo';
            return 'nulo';
        }

        // Calcular porcentaje de una secci√≥n
        function getSectionPercentage(questions) {
            const yesCount = questions.filter(q => q.answer === 'S√≠').length;
            const totalQuestions = questions.length;
            return Math.round((yesCount / totalQuestions) * 100);
        }


        // Toggle de secciones (acordeones)
        function toggleSection(header) {
            const content = header.nextElementSibling;
            const isOpen = content.classList.contains('open');

            // Toggle de la secci√≥n actual
            if (!isOpen) {
                content.classList.add('open');
                header.classList.add('open');
            } else {
                content.classList.remove('open');
                header.classList.remove('open');
            }
        }


        // Inicializar panel emocional cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîç DOM cargado, iniciando configuraci√≥n...');
            
            // Funci√≥n para verificar que todos los elementos est√©n disponibles
            function checkElementsReady() {
                const searchInput = document.getElementById('participant-search');
                const participantsList = document.getElementById('participants-list');
                const filtersBtn = document.getElementById('filters-btn');
                
                console.log('üîç Verificando elementos:');
                console.log('  - participant-search:', !!searchInput);
                console.log('  - participants-list:', !!participantsList);
                console.log('  - filters-btn:', !!filtersBtn);
                
                return searchInput && participantsList && filtersBtn;
            }
            
            // Intentar inicializar inmediatamente
            if (checkElementsReady()) {
                console.log('üîç Todos los elementos est√°n listos, inicializando...');
                initializeEmotionalPanel();
                setupFilters();
            } else {
                console.log('üîç Elementos no listos, esperando...');
                // Si no est√°n listos, intentar cada 100ms hasta 10 segundos
                let attempts = 0;
                const maxAttempts = 100;
                const interval = setInterval(() => {
                    attempts++;
                    console.log(`üîç Intento ${attempts} de verificar elementos...`);
                    
                    if (checkElementsReady() || attempts >= maxAttempts) {
                        clearInterval(interval);
                        if (attempts >= maxAttempts) {
                            console.error('üîç ERROR: No se pudieron encontrar todos los elementos despu√©s de 10 segundos');
                        } else {
                            console.log('üîç Elementos listos, inicializando...');
                            initializeEmotionalPanel();
                            setupFilters();
                        }
                    }
                }, 100);
            }
        });

        // Funci√≥n para actualizar el texto del select
        function updateSelectText(selectId) {
            const select = document.getElementById(selectId);
            const selectedValues = getSelectedValues(selectId);
            const selectText = select.querySelector('.select-text');
            
            if (selectedValues.length === 0) {
                selectText.textContent = selectText.textContent.split(':')[0] + ': Seleccionar';
            } else if (selectedValues.includes('todos')) {
                selectText.textContent = selectText.textContent.split(':')[0] + ': Todos';
            } else if (selectedValues.length === 1) {
                selectText.textContent = selectText.textContent.split(':')[0] + ': ' + selectedValues[0];
            } else {
                selectText.textContent = selectText.textContent.split(':')[0] + ': ' + selectedValues.length + ' seleccionados';
            }
        }

        // Funci√≥n para manejar la opci√≥n "Todos"
        function handleTodosOption(selectId, todosCheckbox) {
            const select = document.getElementById(selectId);
            const allCheckboxes = select.querySelectorAll('input[type="checkbox"]');
            
            if (todosCheckbox.checked) {
                // Si se selecciona "Todos", deseleccionar todo lo dem√°s
                allCheckboxes.forEach(cb => {
                    if (cb !== todosCheckbox) {
                        cb.checked = false;
                    }
                });
            } else {
                // Si se deselecciona "Todos", verificar si hay otras opciones seleccionadas
                const otherSelected = Array.from(allCheckboxes).some(cb => cb !== todosCheckbox && cb.checked);
                if (!otherSelected) {
                    // Si no hay otras opciones seleccionadas, seleccionar "Todos"
                    todosCheckbox.checked = true;
                }
            }
        }

        // Configurar componente select personalizado
        function setupCustomSelects() {
            const customSelects = document.querySelectorAll('.custom-select');
            
            customSelects.forEach(select => {
                const trigger = select.querySelector('.select-trigger');
                const dropdown = select.querySelector('.select-dropdown');
                const options = select.querySelectorAll('.select-option');
                
                // Toggle dropdown
                trigger.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isActive = trigger.classList.contains('active');
                    
                    // Cerrar otros selects
                    customSelects.forEach(otherSelect => {
                        if (otherSelect !== select) {
                            otherSelect.querySelector('.select-trigger').classList.remove('active');
                            otherSelect.querySelector('.select-dropdown').classList.remove('show');
                        }
                    });
                    
                    // Toggle current select
                    trigger.classList.toggle('active');
                    dropdown.classList.toggle('show');
                });
                
                // Manejar clics en opciones
                options.forEach(option => {
                    const checkbox = option.querySelector('input[type="checkbox"]');
                    
                    option.addEventListener('click', (e) => {
                        e.stopPropagation();
                        checkbox.checked = !checkbox.checked;
                        
                        // Manejar opci√≥n "Todos"
                        if (option.dataset.value === 'todos') {
                            handleTodosOption(select.id, checkbox);
                        } else {
                            // Si se selecciona una opci√≥n espec√≠fica, deseleccionar "Todos"
                            const todosCheckbox = select.querySelector('input[type="checkbox"][id$="-todos"]');
                            if (todosCheckbox && todosCheckbox.checked) {
                                todosCheckbox.checked = false;
                            }
                        }
                        
                        updateSelectText(select.id);
                        applyFilters();
                    });
                });
            });
            
            // Cerrar dropdowns al hacer clic fuera
            document.addEventListener('click', () => {
                customSelects.forEach(select => {
                    select.querySelector('.select-trigger').classList.remove('active');
                    select.querySelector('.select-dropdown').classList.remove('show');
                });
            });
        }

        // Configurar funcionalidad de filtros
        function setupFilters() {
            const filtersBtn = document.getElementById('filters-btn');
            const filtersSidePanel = document.getElementById('filters-side-panel');
            const filtersOverlay = document.getElementById('filters-overlay');
            const closeFiltersBtn = document.getElementById('close-filters-btn');
            const applyFiltersBtn = document.getElementById('apply-filters-btn');
            const clearFiltersBtn = document.getElementById('clear-filters-btn');

            // Abrir side panel
            filtersBtn.addEventListener('click', () => {
                filtersSidePanel.classList.add('show');
                filtersOverlay.classList.add('show');
            });

            // Cerrar side panel
            function closeFilters() {
                filtersSidePanel.classList.remove('show');
                filtersOverlay.classList.remove('show');
            }

            closeFiltersBtn.addEventListener('click', closeFilters);
            filtersOverlay.addEventListener('click', closeFilters);

            // Aplicar filtros
            applyFiltersBtn.addEventListener('click', () => {
                applyFilters();
                closeFilters();
            });

            // Limpiar filtros
            clearFiltersBtn.addEventListener('click', () => {
                clearFilters();
                applyFilters();
            });

            // Configurar selects personalizados
            setupCustomSelects();
        }

        // Aplicar filtros
        function applyFilters() {
            console.log('üîç ===== INICIANDO APLICACI√ìN DE FILTROS =====');
            console.log('üîç participantsData existe:', !!participantsData);
            console.log('üîç participantsData.length:', participantsData ? participantsData.length : 'undefined');
            
            const riskFilters = getSelectedValues('risk-select');
            const departmentFilters = getSelectedValues('department-select');
            const positionFilters = getSelectedValues('position-select');
            const genderFilters = getSelectedValues('gender-select');
            const maritalStatusFilters = getSelectedValues('marital-status-select');
            const ageFilters = getSelectedValues('age-select');
            const countryFilters = getSelectedValues('country-select');
            const cityFilters = getSelectedValues('city-select');
            const leaderFilters = getSelectedValues('leader-select');
            
            const searchInput = document.getElementById('participant-search');
            console.log('üîç searchInput existe:', !!searchInput);
            console.log('üîç searchInput.value:', searchInput ? searchInput.value : 'undefined');
            
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
            console.log('üîç T√©rmino de b√∫squeda procesado:', searchTerm);

            console.log('Aplicando filtros:', {
                riskFilters,
                departmentFilters,
                positionFilters,
                genderFilters,
                maritalStatusFilters,
                ageFilters,
                searchTerm
            });

            let filteredParticipants = participantsData.filter(participant => {
                // Filtro por b√∫squeda
                const matchesSearch = !searchTerm || 
                    (participant.name && participant.name.toLowerCase().includes(searchTerm)) ||
                    (participant.role && participant.role.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.department && participant.details.department.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.position && participant.details.position.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.gender && participant.details.gender.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.maritalStatus && participant.details.maritalStatus.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.country && participant.details.country.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.city && participant.details.city.toLowerCase().includes(searchTerm)) ||
                    (participant.details && participant.details.leader && participant.details.leader.toLowerCase().includes(searchTerm));
                
                // Debug para b√∫squeda
                if (searchTerm && searchTerm.trim() !== '') {
                    console.log(`üîç Verificando participante ${participant.name}: matchesSearch = ${matchesSearch}`);
                }

                // Filtro por nivel de riesgo
                const matchesRisk = riskFilters.length === 0 || riskFilters.includes('todos') || riskFilters.includes(participant.riskLevel);

                // Filtro por √°rea (departamento)
                const matchesDepartment = departmentFilters.length === 0 || departmentFilters.includes('todos') || departmentFilters.includes(participant.details.department);

                // Filtro por cargo
                const matchesPosition = positionFilters.length === 0 || positionFilters.includes('todos') || positionFilters.includes(participant.details.position);

                // Filtro por sexo
                const matchesGender = genderFilters.length === 0 || genderFilters.includes('todos') || genderFilters.includes(participant.details.gender);

                // Filtro por estado civil
                const matchesMaritalStatus = maritalStatusFilters.length === 0 || maritalStatusFilters.includes('todos') || maritalStatusFilters.includes(participant.details.maritalStatus);

                // Filtro por edad
                const matchesAge = ageFilters.length === 0 || ageFilters.includes('todos') || matchesAgeRange(participant.details.age, ageFilters);
                
                // Filtro por pa√≠s
                const matchesCountry = countryFilters.length === 0 || countryFilters.includes('todos') || countryFilters.includes(participant.details.country);
                
                // Filtro por ciudad
                const matchesCity = cityFilters.length === 0 || cityFilters.includes('todos') || cityFilters.includes(participant.details.city);
                
                // Filtro por l√≠der
                const matchesLeader = leaderFilters.length === 0 || leaderFilters.includes('todos') || leaderFilters.includes(participant.details.leader);

                const matches = matchesSearch && matchesRisk && matchesDepartment && matchesPosition && matchesGender && matchesMaritalStatus && matchesAge && matchesCountry && matchesCity && matchesLeader;
                
                if (departmentFilters.length > 0 && !departmentFilters.includes('todos')) {
                    console.log(`Participante ${participant.name} (${participant.details.department}): matchesDepartment = ${matchesDepartment}, departmentFilters = ${departmentFilters}`);
                }
                
                return matches;
            });

            console.log(`üîç RESULTADO: Filtrados ${filteredParticipants.length} de ${participantsData.length} participantes`);
            console.log('üîç Lista de participantes filtrados:', filteredParticipants.map(p => p.name));
            
            console.log('üîç Llamando a renderParticipantsList...');
            renderParticipantsList(filteredParticipants);
            console.log('üîç renderParticipantsList completado');
            
            // Actualizar badge de filtros
            updateFilterBadge(riskFilters, departmentFilters, positionFilters, genderFilters, maritalStatusFilters, ageFilters, countryFilters, cityFilters, leaderFilters, searchTerm);
        }

        // Actualizar badge de filtros
        function updateFilterBadge(riskFilters, departmentFilters, positionFilters, genderFilters, maritalStatusFilters, ageFilters, countryFilters, cityFilters, leaderFilters, searchTerm) {
            const badge = document.getElementById('filter-badge');
            let activeFiltersCount = 0;

            // Debug: Mostrar valores recibidos
            console.log('Badge Debug - Valores recibidos:', {
                riskFilters,
                departmentFilters,
                positionFilters,
                genderFilters,
                maritalStatusFilters,
                ageFilters,
                countryFilters,
                cityFilters,
                leaderFilters,
                searchTerm
            });

            // Contar filtros activos (excluyendo "todos" y b√∫squeda vac√≠a)
            if (riskFilters.length > 0 && !riskFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por riskFilters');
            }
            if (departmentFilters.length > 0 && !departmentFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por departmentFilters');
            }
            if (positionFilters.length > 0 && !positionFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por positionFilters');
            }
            if (genderFilters.length > 0 && !genderFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por genderFilters');
            }
            if (maritalStatusFilters.length > 0 && !maritalStatusFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por maritalStatusFilters');
            }
            if (ageFilters.length > 0 && !ageFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por ageFilters');
            }
            
            if (countryFilters.length > 0 && !countryFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por countryFilters');
            }
            
            if (cityFilters.length > 0 && !cityFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por cityFilters');
            }
            
            if (leaderFilters.length > 0 && !leaderFilters.includes('todos')) {
                activeFiltersCount++;
                console.log('Badge: +1 por leaderFilters');
            }
            // El t√©rmino de b√∫squeda no se cuenta como filtro activo
            // ya que es una funcionalidad independiente de los filtros

            console.log('Badge: Total de filtros activos:', activeFiltersCount);

            // Mostrar/ocultar badge y actualizar n√∫mero
            if (activeFiltersCount > 0) {
                badge.textContent = activeFiltersCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // Funci√≥n auxiliar para verificar rango de edad
        function matchesAgeRange(age, ageFilters) {
            return ageFilters.some(range => {
                switch(range) {
                    case '20-30':
                        return age >= 20 && age <= 30;
                    case '31-40':
                        return age >= 31 && age <= 40;
                    case '41-50':
                        return age >= 41 && age <= 50;
                    case '51+':
                        return age >= 51;
                    default:
                        return false;
                }
            });
        }

        // Funci√≥n auxiliar para obtener valores seleccionados
        function getSelectedValues(selectId) {
            const select = document.getElementById(selectId);
            const checkboxes = select.querySelectorAll('input[type="checkbox"]:checked');
            return Array.from(checkboxes).map(cb => cb.closest('.select-option').dataset.value);
        }

        // Limpiar filtros
        function clearFilters() {
            const selectIds = ['risk-select', 'department-select', 'position-select', 'gender-select', 'marital-status-select', 'age-select', 'country-select', 'city-select'];
            
            selectIds.forEach(selectId => {
                const select = document.getElementById(selectId);
                const checkboxes = select.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => cb.checked = false);
                updateSelectText(selectId);
            });
            
            document.getElementById('participant-search').value = '';
            renderParticipantsList(participantsData);
            
            // Ocultar badge de filtros
            const badge = document.getElementById('filter-badge');
            badge.style.display = 'none';
        }

        // Actualizar funci√≥n de b√∫squeda para incluir filtros
        function setupSearch() {
            console.log('üîç Configurando buscador...');
            
            // Funci√≥n para manejar la b√∫squeda
            function handleSearch(e) {
                const searchValue = e.target.value;
                console.log('üîç ===== EVENTO DE B√öSQUEDA DETECTADO =====');
                console.log('üîç Valor de b√∫squeda:', searchValue);
                console.log('üîç Tipo de evento:', e.type);
                console.log('üîç participantsData disponible:', participantsData ? participantsData.length : 'undefined');
                console.log('üîç Elemento que dispar√≥ el evento:', e.target);
                
                // Aplicar filtros inmediatamente
                console.log('üîç Llamando a applyFilters...');
                applyFilters();
                console.log('üîç applyFilters completado');
            }
            
            // Funci√≥n para configurar el buscador cuando est√© disponible
            function configureSearch() {
                const searchInput = document.getElementById('participant-search');
                console.log('üîç Elemento de b√∫squeda encontrado:', searchInput);
                
                if (searchInput) {
                    // Remover event listeners existentes para evitar duplicados
                    searchInput.removeEventListener('input', handleSearch);
                    searchInput.removeEventListener('keyup', handleSearch);
                    
                    // Agregar m√∫ltiples event listeners para mayor compatibilidad
                    searchInput.addEventListener('input', handleSearch);
                    searchInput.addEventListener('keyup', handleSearch);
                    
                    console.log('üîç Event listeners agregados correctamente');
                    
                    // Probar que funciona
                    console.log('üîç Probando b√∫squeda...');
                    return true;
                } else {
                    console.error('üîç ERROR: No se encontr√≥ el elemento participant-search');
                    return false;
                }
            }
            
            // Intentar configurar inmediatamente
            if (!configureSearch()) {
                // Si no se encuentra, intentar cada 100ms hasta 5 segundos
                let attempts = 0;
                const maxAttempts = 50;
                const interval = setInterval(() => {
                    attempts++;
                    console.log(`üîç Intento ${attempts} de encontrar el buscador...`);
                    
                    if (configureSearch() || attempts >= maxAttempts) {
                        clearInterval(interval);
                        if (attempts >= maxAttempts) {
                            console.error('üîç ERROR: No se pudo encontrar el buscador despu√©s de 5 segundos');
                        }
                    }
                }, 100);
            }
        }

        // Funci√≥n para descargar respuestas emocionales
        function downloadEmotionalResponses() {
            console.log('üîç INICIANDO downloadEmotionalResponses()');
            
            // Verificar que tenemos los datos de participantes
            if (!participantsData || participantsData.length === 0) {
                console.log('‚ùå No se encontraron datos de participantes');
                alert('No se encontraron datos de participantes');
                return;
            }
            
            console.log('üîç Datos de participantes encontrados:', participantsData.length);
            
            // Crear headers del CSV
            const headers = [
                'Participante',
                'Cargo',
                'Nivel de Riesgo',
                'Edad',
                'Departamento',
                'Posici√≥n',
                'G√©nero',
                'Estado Civil',
                'Pa√≠s',
                'Ciudad',
                'Experiencia',
                'Email',
                'L√≠der'
            ];
            
            // Agregar headers de todas las preguntas
            const allQuestions = [];
            
            // Verificar que el primer participante tenga surveyResults
            if (participantsData[0] && participantsData[0].surveyResults) {
                console.log('üîç Secciones disponibles:', Object.keys(participantsData[0].surveyResults));
                
                // Iterar sobre todas las secciones disponibles
                Object.keys(participantsData[0].surveyResults).forEach(sectionName => {
                    console.log(`üîç Procesando secci√≥n: ${sectionName}`);
                    const section = participantsData[0].surveyResults[sectionName];
                    if (Array.isArray(section)) {
                        section.forEach(q => {
                            allQuestions.push(q.question);
                        });
                    }
                });
            } else {
                console.log('‚ùå No se encontraron surveyResults en el primer participante');
                console.log('üîç Estructura del primer participante:', participantsData[0]);
            }
            
            // Agregar headers de preguntas
            headers.push(...allQuestions);
            
            console.log('üîç Headers creados:', headers.length);
            console.log('üîç Total de preguntas:', allQuestions.length);
            console.log('üîç Headers demogr√°ficos:', headers.length - allQuestions.length);
            console.log('üîç √öltimas 3 preguntas:', allQuestions.slice(-3));
            
            // Crear datos del CSV
            const csvData = [];
            
            participantsData.forEach((participant, index) => {
                console.log(`üîç Procesando participante ${index + 1}: ${participant.name}`);
                
                const row = [
                    participant.name,
                    participant.role,
                    participant.riskLevel,
                    participant.details.age,
                    participant.details.department,
                    participant.details.position,
                    participant.details.gender,
                    participant.details.maritalStatus,
                    participant.details.country,
                    participant.details.city,
                    participant.details.experience,
                    participant.details.email,
                    participant.details.leader
                ];
                
                // Agregar respuestas de todas las secciones
                const allAnswers = [];
                
                // Iterar sobre todas las secciones disponibles
                if (participant.surveyResults) {
                    Object.keys(participant.surveyResults).forEach(sectionName => {
                        const section = participant.surveyResults[sectionName];
                        if (Array.isArray(section)) {
                            section.forEach((q, qIndex) => {
                                const answer = q.answer || 'Sin respuesta';
                                allAnswers.push(answer);
                                
                            });
                        }
                    });
                } else {
                    console.log(`‚ö†Ô∏è Participante ${participant.name} no tiene surveyResults`);
                }
                
                row.push(...allAnswers);
                csvData.push(row);
                
                console.log(`üîç Participante ${participant.name} procesado: ${row.length} columnas`);
                console.log(`üîç Respuestas del participante: ${allAnswers.length}`);
                
                // Verificar que el n√∫mero de respuestas coincida con el n√∫mero de preguntas
                if (allAnswers.length !== allQuestions.length) {
                    console.log(`‚ö†Ô∏è DESBALANCE: ${participant.name} tiene ${allAnswers.length} respuestas pero hay ${allQuestions.length} preguntas`);
                }
                
                // Debug espec√≠fico para las √∫ltimas 2 preguntas
                if (index === 0) {
                    console.log(`üîç DEBUG √öLTIMAS 2 PREGUNTAS:`);
                    console.log(`üîç Total respuestas: ${allAnswers.length}`);
                    console.log(`üîç √öltimas 2 respuestas: ${allAnswers.slice(-2)}`);
                    console.log(`üîç Pregunta 19 (√≠ndice 18): "${allQuestions[18]}" = "${allAnswers[18]}"`);
                    console.log(`üîç Pregunta 20 (√≠ndice 19): "${allQuestions[19]}" = "${allAnswers[19]}"`);
                }
            });
            
            console.log('üîç Datos CSV creados:', csvData.length, 'filas');
            console.log('üîç Primera fila de datos:', csvData[0]);
            
            // Generar CSV
            const csvContent = convertToCSV(csvData, headers);
            console.log('üîç CSV generado, longitud:', csvContent.length);
            
            // Descargar archivo
            downloadCSVFile(csvContent, 'respuestas_emocionales_nom035.csv');
            console.log('‚úÖ Descarga completada');
        }
        
        // Funci√≥n auxiliar para convertir datos a CSV
        function convertToCSV(data, headers) {
            const csvContent = [
                headers.map(header => `"${header}"`).join(','),
                ...data.map(row => row.map(cell => `"${cell}"`).join(','))
            ].join('\n');
            return csvContent;
        }
        
        // Funci√≥n auxiliar para descargar CSV
        function downloadCSVFile(csvContent, filename) {
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ===== SISTEMA DE FEEDBACK Y ENMASCARAMIENTO =====
        
        // Variables globales para el sistema de feedback
        let currentUser = 'Usuario_' + Math.random().toString(36).substr(2, 9);
        let currentSection = 'Vista General';
        let feedbackData = [];
        
        // Funci√≥n para iniciar el prototipo
        
        // Funci√≥n para abrir el modal de feedback
        function openFeedbackModal() {
            document.getElementById('currentSection').value = currentSection;
            document.getElementById('feedbackModal').classList.add('show');
            document.getElementById('feedbackComment').focus();
        }
        
        // Funci√≥n para cerrar el modal de feedback
        function closeFeedbackModal() {
            document.getElementById('feedbackModal').classList.remove('show');
            document.getElementById('feedbackComment').value = '';
        }
        
        // Funci√≥n para enviar feedback
        function submitFeedback() {
            const comment = document.getElementById('feedbackComment').value.trim();
            
            if (!comment) {
                showNotification('Por favor, escribe un comentario antes de enviar.', 'error');
                return;
            }
            
            // Crear objeto de feedback
            const feedback = {
                user: currentUser,
                section: currentSection,
                comment: comment,
                timestamp: new Date().toISOString(),
                url: window.location.href
            };
            
            // Agregar a la lista local
            feedbackData.push(feedback);
            
            // Enviar a Google Sheets
            sendToGoogleSheets(feedback);
            
            // Cerrar modal y mostrar confirmaci√≥n
            closeFeedbackModal();
            showNotification('¬°Gracias por tu feedback! Se ha guardado correctamente.', 'success');
        }
        
        // Funci√≥n para enviar datos a Google Sheets
        async function sendToGoogleSheets(feedback) {
            try {
                // URL del webhook de Google Apps Script
                const webhookUrl = 'https://script.google.com/macros/s/AKfycbzKqCwZj410D4PYv88TSZPeMmTODz-aUaLj3lW4BmUWGHxBTnTd0ZzI06XE37F73FEl/exec';
                
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(feedback)
                });
                
                if (response.ok) {
                    console.log('Feedback enviado a Google Sheets:', feedback);
                } else {
                    console.error('Error al enviar feedback:', response.statusText);
                }
            } catch (error) {
                console.error('Error de conexi√≥n:', error);
                // Guardar localmente como respaldo
                localStorage.setItem('feedback_backup', JSON.stringify(feedbackData));
            }
        }
        
        // Funci√≥n para mostrar notificaciones
        function showNotification(message, type = 'info') {
            // Crear elemento de notificaci√≥n
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 16px 20px;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.15);
                z-index: 10001;
                font-weight: 600;
                max-width: 300px;
                animation: slideInRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remover despu√©s de 4 segundos
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }
        
        // Funci√≥n para actualizar la secci√≥n actual
        function updateCurrentSection(sectionName) {
            currentSection = sectionName;
            document.getElementById('sectionIndicator').textContent = `üìä ${sectionName}`;
        }
        
        // Interceptar navegaci√≥n para actualizar secci√≥n
        document.addEventListener('click', function(e) {
            if (e.target.closest('.nav-tab')) {
                const tabText = e.target.closest('.nav-tab').textContent.trim();
                updateCurrentSection(tabText);
            }
        });
        
        // Inicializar sistema de feedback
        document.addEventListener('DOMContentLoaded', function() {
            // Ocultar elementos de feedback inicialmente
            document.getElementById('feedbackTrigger').style.display = 'none';
            document.getElementById('sectionIndicator').style.display = 'none';
            
            // Generar ID √∫nico para el usuario
            currentUser = 'Usuario_' + Date.now();
            
            console.log('Sistema de feedback inicializado para:', currentUser);
        });
        
    </script>

    <!-- ===== BOT√ìN DE FEEDBACK FLOTANTE ===== -->
    <div class="feedback-trigger" id="feedbackTrigger" onclick="openFeedbackModal()">
        üí¨
    </div>
    
    <!-- ===== MODAL DE FEEDBACK ===== -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-modal-content">
            <div class="feedback-modal-header">
                <h3>üí¨ Deja tu Feedback</h3>
                <button class="feedback-close" onclick="closeFeedbackModal()">&times;</button>
            </div>
            <div class="feedback-modal-body">
                <form id="feedbackForm">
                    <div class="feedback-form-group">
                        <label for="feedbackSection">Secci√≥n actual:</label>
                        <select id="feedbackSection" name="section" required>
                            <option value="">Selecciona una secci√≥n</option>
                            <option value="Home - Encuestas">Home - Encuestas</option>
                            <option value="Resultados Emocionales">Resultados Emocionales</option>
                            <option value="Resultados Entorno Laboral">Resultados Entorno Laboral</option>
                            <option value="Vista General">Vista General</option>
                            <option value="Descarga de Reportes">Descarga de Reportes</option>
                            <option value="Otra">Otra</option>
                        </select>
                    </div>
                    <div class="feedback-form-group">
                        <label for="feedbackComment">Tu comentario:</label>
                        <textarea id="feedbackComment" name="comment" placeholder="¬øQu√© funciona bien? ¬øQu√© falta? ¬øQu√© mejorar√≠as? ¬øQu√© necesita tu empresa?" required></textarea>
                    </div>
                    <div class="feedback-form-actions">
                        <button type="button" class="feedback-cancel" onclick="closeFeedbackModal()">Cancelar</button>
                        <button type="submit" class="feedback-submit">Enviar Feedback</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ===== ESTILOS DEL FEEDBACK ===== -->
    <style>
        .feedback-trigger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--ubits-accent-brand);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--ubits-button-focus-ring);
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feedback-trigger:hover {
            background: var(--ubits-button-primary-hover);
            transform: scale(1.1);
        }

        .feedback-modal {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 400px;
            max-width: 90vw;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--ubits-bg-dim);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s ease;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .feedback-modal.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .feedback-modal-content {
            padding: 0;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .feedback-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--ubits-border-1);
        }

        .feedback-modal-header h3 {
            margin: 0;
            color: var(--ubits-fg-1-high);
            font-size: 18px;
        }

        .feedback-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--ubits-fg-1-medium);
        }

        .feedback-modal-body {
            padding: 20px;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .feedback-form-group {
            margin-bottom: 20px;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .feedback-form-group label {
            display: block;
            margin-bottom: 8px;
            color: #374151;
            font-weight: 500;
        }

        .feedback-form-group select,
        .feedback-form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--ubits-border-1);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            box-sizing: border-box;
            max-width: 100%;
        }

        .feedback-form-group textarea {
            height: 100px;
            resize: vertical;
            max-width: 100%;
            overflow-x: hidden;
            word-wrap: break-word;
        }

        .feedback-form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .feedback-cancel,
        .feedback-submit {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .feedback-cancel {
            background: var(--ubits-bg-2);
            color: var(--ubits-fg-1-high);
        }

        .feedback-submit {
            background: var(--ubits-accent-brand);
            color: white;
        }

        .feedback-submit:hover {
            background: var(--ubits-button-primary-hover);
        }
    </style>

    <!-- ===== JAVASCRIPT DEL FEEDBACK ===== -->
    <script>
        // URL del webhook de n8n
        const FEEDBACK_WEBHOOK_URL = 'https://egarcia.app.n8n.cloud/webhook/feedback';

        // Abrir modal de feedback
        function openFeedbackModal() {
            console.log('üí¨ Abriendo modal de feedback...');
            const modal = document.getElementById('feedbackModal');
            modal.classList.add('show');
            
            // Detectar secci√≥n actual
            const section = detectCurrentSection();
            document.getElementById('feedbackSection').value = section;
        }

        // Cerrar modal de feedback
        function closeFeedbackModal() {
            console.log('üí¨ Cerrando modal de feedback...');
            const modal = document.getElementById('feedbackModal');
            modal.classList.remove('show');
            
            // Limpiar formulario
            document.getElementById('feedbackForm').reset();
        }

        // Detectar secci√≥n actual
        function detectCurrentSection() {
            const url = window.location.pathname;
            if (url.includes('resultados-nom035-entorno')) {
                return 'Resultados Entorno Laboral';
            } else if (url.includes('resultados-nom035')) {
                return 'Resultados Emocionales';
            } else if (url.includes('encuestas')) {
                return 'Home - Encuestas';
            }
            return 'Resultados Emocionales';
        }

        // Manejar env√≠o de feedback
        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            handleFeedbackSubmit();
        });

        // Funci√≥n para enviar feedback
        async function handleFeedbackSubmit() {
            console.log('üì§ Enviando feedback an√≥nimo...');
            
            const formData = new FormData(document.getElementById('feedbackForm'));
            const feedbackData = {
                user: 'An√≥nimo',
                section: formData.get('section'),
                comment: formData.get('comment'),
                timestamp: new Date().toISOString(),
                url: window.location.href
            };

            console.log('üìã Datos del feedback:', feedbackData);

            try {
                // Enviar a n8n
                const response = await fetch(FEEDBACK_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(feedbackData)
                });

                if (response.ok) {
                    console.log('‚úÖ Feedback enviado exitosamente');
                    showMessage('¬°Gracias por tu feedback!', 'success');
                    closeFeedbackModal();
                } else {
                    throw new Error('Error en la respuesta del servidor');
                }
            } catch (error) {
                console.error('‚ùå Error al enviar feedback:', error);
                showMessage('Error al enviar el feedback. Int√©ntalo de nuevo.', 'error');
            }
        }

        // Mostrar mensaje
        function showMessage(message, type) {
            const modal = document.getElementById('feedbackModal');
            const messageDiv = document.createElement('div');
            messageDiv.className = `feedback-message feedback-${type}`;
            messageDiv.textContent = message;
            messageDiv.style.cssText = `
                position: absolute;
                top: 10px;
                left: 10px;
                right: 10px;
                padding: 10px;
                border-radius: 8px;
                text-align: center;
                font-weight: 500;
                z-index: 1002;
                background: ${type === 'success' ? '#d1fae5' : '#fee2e2'};
                color: ${type === 'success' ? '#065f46' : '#dc2626'};
            `;
            
            modal.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Cerrar modal al hacer clic fuera
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('feedbackModal');
            
            if (e.target === modal) {
                closeFeedbackModal();
            }
        });

        // Cerrar modal con Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeFeedbackModal();
            }
        });
    </script>

</body>
</html>
